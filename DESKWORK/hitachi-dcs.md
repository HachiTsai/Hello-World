# Hitachi DCS — SLC 控制系統全覽 GUIDE ✨

以下為整理好的完整 Markdown 內容（可直接複製並儲存為 .md 檔，例如檔名：`hitachi_slc_slc_guide.md`）。我已依你的要求加入 emoji、表格、流程文字示意與 Mermaid 風格文字區塊（以程式區塊表示），並保留所有重點與 PID / 演算功能塊說明。

請將下列全部內容複製並儲存為 .md 檔，或回覆「提供檔案下載」我可為你打包成可下載檔案。

---

> 前言 ✨  
> 這篇文章將全面彙整你所有備註，以架構化分類的方式解構日立 DCS SLC 控制系統內容。每一主題皆深入展開，包含表格、流程文字圖示意，尤其完整展現 PID 與演算功能。所有重點必備，並利用 emoji 提升閱讀感！

---

## 目錄

- [Hitachi DCS — SLC 控制系統全覽 GUIDE ✨](#hitachi-dcs--slc-控制系統全覽-guide-)
  - [目錄](#目錄)
  - [一、SLC 系統架構全貌 🏗️](#一slc-系統架構全貌-️)
    - [1.1 模組協同運作 🧩](#11-模組協同運作-)
  - [流程文字圖（示意）](#流程文字圖示意)
  - [二、資料收集與 LOG 運作模式 🕒📋](#二資料收集與-log-運作模式-)
    - [2.1 資料處理與分類](#21-資料處理與分類)
  - [實務流程圖例（文字版）](#實務流程圖例文字版)
    - [2.2 LOG 設計重點與限制 🚦](#22-log-設計重點與限制-)
  - [三、演算功能塊全集：集中解析 🚀📦](#三演算功能塊全集集中解析-)
    - [3.1 基本邏輯與信號處理（功能塊詳細）](#31-基本邏輯與信號處理功能塊詳細)
      - [3.1.1 F02 類比輸入處理（AINP）功能塊詳解](#311-f02-類比輸入處理ainp功能塊詳解)
  - [基本特性](#基本特性)
  - [端子 / 參數範例表](#端子--參數範例表)
  - [F02 實務應用（PT100 範例）](#f02-實務應用pt100-範例)
  - [流程示意（文字/mermaid 形式](#流程示意文字mermaid-形式)
    - [3.1.2 ALGC（F00）基本邏輯運算功能塊（示意）](#312-algcf00基本邏輯運算功能塊示意)
    - [3.2 控制運算（PID 與調節功能塊）](#32-控制運算pid-與調節功能塊)
  - [PID（F46）腳位與流程示意（文字）](#pidf46腳位與流程示意文字)
  - [PID 調整建議](#pid-調整建議)
  - [PID 運作文字流程](#pid-運作文字流程)
    - [3.3 批次運算、計數與警報（功能塊細節）](#33-批次運算計數與警報功能塊細節)
  - [CBCH（F32）示意流程](#cbchf32示意流程)
  - [AHLA（F08）示意流程](#ahlaf08示意流程)
  - [批次 / 警報設計建議](#批次--警報設計建議)
  - [四、繼電器邏輯與自保持設計 🟢🪝](#四繼電器邏輯與自保持設計-)
    - [4.1 MF / 自保持邏輯](#41-mf--自保持邏輯)
    - [4.2 順控流程核心（文字示意）](#42-順控流程核心文字示意)
  - [五、操作設定、HMI 及 SCADA 介面 🎛️](#五操作設定hmi-及-scada-介面-️)
    - [5.1 Tag 視覺化 / 置針與刻度](#51-tag-視覺化--置針與刻度)
    - [5.2 資料擴展、單位換算（0~6000 計算範圍）](#52-資料擴展單位換算06000-計算範圍)
    - [5.3 OPC 通訊 / MES 對接](#53-opc-通訊--mes-對接)
  - [六、進階討論與學習技巧 📝🧠](#六進階討論與學習技巧-)
    - [6.1 LOG 策略 \& 效能規劃](#61-log-策略--效能規劃)
    - [6.2 學習建議 🎒](#62-學習建議-)
  - [七、常見問答 \& 技術經驗 🤔💬](#七常見問答--技術經驗-)
    - [7.1 PID 整定經驗分享](#71-pid-整定經驗分享)

---

## 一、SLC 系統架構全貌 🏗️

| 模組代號 | 主要功能說明 |
|---:|:---|
| **SLC-DDC** | 自動迴路調節（精密 PID、指令控制等） |
| **SLC-SEQ** | 步驟 / 批次流程主控，條件判斷切換等 |
| **SLC-BLS** | 數學演算、邏輯判斷與信號處理 |
| **SLC-VMD** | 現場設備（閥門 / 馬達）驅動指令 |
| **SLC-ALM** | 警報 / 異常提示核心 |

### 1.1 模組協同運作 🧩

- **協同關係**：SLC-SEQ 統握流程整合，BLS 提供演算、DDC 負責 PID 調節，VMD 執行設備動作，ALM 同步警報監控。  
- **資料互通**：模組間透過標準端子與內部資料匯流交換，形成閉環控制系統。

## 流程文字圖（示意）

```mermaid
SEQ 判斷條件  →  BLS 演算  →  DDC 控制
     ↓（設備指令傳送）       ↓（警報監控）
VMD 執行設備  →  ALM 告警 / 記錄
```

---

## 二、資料收集與 LOG 運作模式 🕒📋

### 2.1 資料處理與分類

| 類型 | 說明 | 常見用途 |
|---:|:---|:---|
| **每時處理 (LG)** | 依時段自動收集紀錄 | 日 / 月報、極值統計 |
| **任意時 (DG)** | 事件觸發、條件觸發即時記錄 | 異常追溯、操作紀錄 |

## 實務流程圖例（文字版）

- 每時紀錄：流程啟動 → 依週期自動 LOG → 統計分析 / 日報  
- 任意觸發：事件發生 → 即時 LOG → 重現異常 / 操作明細

### 2.2 LOG 設計重點與限制 🚦

- LOG 最短時間間隔為 `1 秒`，不適合超高速取樣（需外接 DAQ）。  
- 支援點數上限範例：DG 4000、LG 1000（依系統版本不同）。  
- 高頻訊號建議：本機暫存 + 外部分流，避免資料溢出。  
- 設計前務必評估現場頻率、容量，清楚區分統計與原始紀錄需求。

---

## 三、演算功能塊全集：集中解析 🚀📦

以下分章解析常用 / 進階功能塊：信號處理、PID 調節、批次計數、警報等。

### 3.1 基本邏輯與信號處理（功能塊詳細）

#### 3.1.1 F02 類比輸入處理（AINP）功能塊詳解

- **名稱**：F02 AINP（Analog Input Processor）  
- **用途**：處理現場類比輸入（如 4-20mA、0-10V、熱電偶），轉換為系統內工程量 (0~100% 或實際單位)。

## 基本特性

- 信號標準化（轉為工程單位，如 ℃、kPa）  
- 一階濾波（FLT）以消除雜訊  
- 線性化（SCL）支援非線性感測器曲線（PT100 等）  
- 多組上下限警報（Y1 / Y2）與異常檢測（斷線）  

## 端子 / 參數範例表

| 端子/參數 | 主要作用 | 典型應用情境 | 特殊注意事項 |
|---:|:---|:---|:---|
| **X1** | 輸入現場感測器原始信號 (4-20mA) | PT100、壓力傳感器等 | 接線需正確、符號一致 |
| **PV** | 輸出標準化工程值（如 ℃/kPa） | 控制/監控/顯示 | 異常時輸出預設失效值 |
| **Y1** | 高限警報（PV > HH 時 ON） | 監控超溫 / 超壓 | 設定 HI 與遲滯避免震盪 |
| **Y2** | 低限警報（PV < LL 時 ON） | 低溫 / 低壓異常 | 建議加遲滯防止誤觸發 |
| **HL / LL** | 高 / 低限設定值 | 警報門檻 | 接近臨界區需觀察反應 |
| **FLT** | 濾波時間常數（秒） | 去除雜訊、平滑曲線 | 過長響應慢；過短不足以濾波 |
| **SCL** | 刻度 / 線性換算 | 非線性感測器（PT100） | 需根據感測器表設定 |

## F02 實務應用（PT100 範例）

- PT100 接入 X1，SCL 依 PT100 阻值-溫度曲線設定，HL=80℃、LL=20℃，FLT=2s。F02 會輸出 PV 並聯動 Y1/Y2 警報。

## 流程示意（文字/mermaid 形式

```text
PT100 感測器 --> F02 AINP X1
    PV: 25℃
    Y1: OFF
    Y2: OFF
    PV --> PID 控制器
```

---

### 3.1.2 ALGC（F00）基本邏輯運算功能塊（示意）

```text
IN1~IN4 --> ALGC F00 --> OUT, /OUT, MEM
R (復位) --> ALGC F00
```

- **說明**：IN1~IN4 為複合判斷輸入；ALGC 依邏輯輸出主輸出 `OUT`、反向 `/OUT` 與自保持 `MEM`。常用於按鈕合併、序列啟停、自保持。

功能塊重點表

| 功能塊 | 主要作用 | 典型輸入點 | 輸出點 | 備註 |
|---:|:---|:---|:---:|:---|
| **F00 [ALGC]** | 基本邏輯運算（AND/OR/NOT 等） | IN1~IN4, R | OUT, /OUT, MEM | 常用於多按鈕啟停、自保持、步進流控 |
| **F25 [AFIL]** | 移動平均濾波 | IN, N | OUT | 建議在模擬環境調整 N |
| **F27 [ARTA]** | 勾配檢出（變化監控） | IN, TH | UP, DOWN, OUT | 監控瞬時跳變，聯動警報 |
| **F18 [ACNV]** | 非線性換算 / 多點表 | IN, TABLE | OUT | 用於 PT100、熱電偶等非線性換算 |
| **F12 [ACON]** | 多組常數切換（配方） | SEL, CNS1~CNSn | OUT | 批次配方切換 |
| **F67/68** | BCD ↔ Binary 轉換 | BCD/BIN | BIN/BCD | 資料介接橋樑，確保格式一致 |

---

### 3.2 控制運算（PID 與調節功能塊）

## PID（F46）腳位與流程示意（文字）

```mermaid
SV (設定值) --> PID F46
PV (現值)   --> PID F46
MV_MAN      --> PID F46
EN (啟動)   --> PID F46
P/I/D 參數 --> PID F46
PID F46 --> MV (輸出) / STAT / ALM
```

| 功能塊 | 主要用途 | 主要輸入點 | 輸出點 | 備註 |
|---:|:---|:---|:---:|:---|
| **F04 [CDEV]** | SV - PV 偏差運算 | SV, PV | OUT | OUT 可供 PID 或判斷使用 |
| **F46 [PID] / CPID** | PID 調節器 | SV, PV, MV_MAN, EN, P/I/D | MV, ALM, STAT | MV 接 AO 或 PWM，支援 Auto/Manual 切換 |
| **F29 [CONF]** | ON/OFF 二位調節 | IN, ONTRIP, OFFTRIP | OUT | 適用簡易開關控制 |
| **F44/45 [CPOD/CPOA]** | PWM 輸出 | IN, PW | OUT (PWM) | 用於馬達、閥門等驅動 |

## PID 調整建議

- 初設：模擬條件下調 P、I、D，觀察步態響應。  
- 調整順序：先 P → 再 I → 最後 D（D 常小心使用）。  
- Feedforward：與 PID (Feedback) 並用可大幅提升對已知擾動的應對能力。  
- 實務步驟：先用小步進調參，記錄響應曲線，逐步收斂。

## PID 運作文字流程

```mermaid
PV / 目標值 進入 F04 → 產生偏差
F46 進行 P / I / D 運算 → 輸出控制量 (MV)
MV 驅動 VMD 裝置 → 現場元件反饋至 PV
```

---

### 3.3 批次運算、計數與警報（功能塊細節）

| 功能塊 | 主要功能 | 主要輸入點 | 輸出點 | 備註 |
|---:|:---|:---|:---:|:---|
| **F32 [CBCH]** | 批次累加 / 計數 | IN, RST, SET | CV (累積值), OUT | 用於批次分段、原料計量 |
| **F08 [AHLA]** | 上下限警報 | IN, HS, LS, MASK, ACK | ALARM_H, ALARM_L, STAT | 支援遮蔽、確認、復歸 |

## CBCH（F32）示意流程

```mermiad
IN (計數脈波) --> CBCH F32 --> CV (累計值)
RST (歸零) --> CBCH F32
SET (初值) --> CBCH F32
CBCH --> OUT (達標脈波)
```

## AHLA（F08）示意流程

```mermaid
IN (監控信號) --> AHLA F08
HS / LS / MASK / ACK --> AHLA F08
AHLA --> ALARM_H / ALARM_L / STAT
```

## 批次 / 警報設計建議

- 批次運算建議配合事件 LOG 記錄，確保每次批次皆可追溯。  
- 警報遮蔽（MASK）常用於開機自檢期間避免誤報。  
- 設計多階段警戒策略（警告 → 停機）提升安全性。

---

## 四、繼電器邏輯與自保持設計 🟢🪝

### 4.1 MF / 自保持邏輯

- **MF 端子**：表示中間狀態（中介繼電器），常用於多條件合併。  
- 自保持設計多利用 ALGC 與 MF 實現，用於警報自鎖、保持某狀態直到手動復歸。

### 4.2 順控流程核心（文字示意）

```mermaid
條件判斷（移行條件） → 進入下一步
若條件不符 → 保持或進入容錯分支（修正 / 異常補正）
```

- 要點：每步流程應有明確移行條件、異常處理與跳步機制。

---

## 五、操作設定、HMI 及 SCADA 介面 🎛️

### 5.1 Tag 視覺化 / 置針與刻度

- **置針**：最多顯示 2 組基準，用於比較目標與現值，並以顏色強化辨識。  
- **刻度**：AO / 顯示依 PGS 設定自動縮放，確保畫面顯示與現場一致。

### 5.2 資料擴展、單位換算（0~6000 計算範圍）

- 支援多種單位換算、積算換算與 TAG 間比對。彈性範圍可因應工廠需求調整。

### 5.3 OPC 通訊 / MES 對接

- **EX-N01** 常見模組支援 OPC-DA，便於與其他 DCS / MES / SCADA 系統整合。  
- **通訊示意（文字說明）**

```mermaid
集中數據 → 多系統交互對接 → 上傳工廠監控 / MES
```

---

## 六、進階討論與學習技巧 📝🧠

### 6.1 LOG 策略 & 效能規劃

- 根據資料型態、查詢頻率與分析深度定義 LOG 策略。  
- 先估算容量與取樣頻率，再進行壓力測試。  
- 高解析度資料建議以外接 DAQ 為主並做彙整。

### 6.2 學習建議 🎒

- 先掌握高頻使用功能塊：`PID`、`偏差`、`濾波`、`批次計數`。  
- 先在小型現場或模擬環境測試後再放大到正式系統。  
- 有特殊需求時參閱原廠手冊與版本說明。

---

## 七、常見問答 & 技術經驗 🤔💬

### 7.1 PID 整定經驗分享

| 動作 | 調整結果摘要 |
|---:|:---|
| P 縮小 | 反應快但易振盪 |
| P 拉大 | 反應慢但較穩 |
| I 縮短 | 易消除偏移但易振盪 |
| I 拉長 | 反應慢但偏移消除較慢 |
